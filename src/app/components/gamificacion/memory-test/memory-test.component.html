<div class="gamification-header">
  <button class="back-btn" routerLink="/gamificacion">⬅ Volver</button>
  <h2>Memory Test</h2>
</div>

<div class="memory-layout">
  <div class="memory-board">
    <div
      class="card"
      *ngFor="let card of cards"
      (click)="flipCard(card)"
      [class.disabled]="!gameStarted"
    >
      <div class="card-inner" [class.flipped]="card.flipped || card.matched">
        <div class="card-front">❓</div>
        <div class="card-back">{{ card.icon }}</div>
      </div>
    </div>
  </div>


  <div class="memory-info">
    <h3>Mis Aprendizajes</h3>

    <div *ngFor="let icon of icons">
      <div class="info-card" [class.unlocked]="infoTexts[icon].matched">
        <h4>{{ infoTexts[icon].title }}</h4>
        <div *ngIf="infoTexts[icon].matched">
          <p>{{ infoTexts[icon].detail }}</p>
          <button
            *ngIf="!infoTexts[icon].claimed"
            (click)="claimPoints(icon)"
          >
            💎 Reclamar 10 puntos
          </button>
          <span *ngIf="infoTexts[icon].claimed" class="claimed">✅ Puntos reclamados</span>
        </div>
        <div *ngIf="!infoTexts[icon].matched" class="locked">
          🔒 Esperando coincidencia...
        </div>
      </div>
    </div>

    <div class="bottom-info">
      <p>Tiempo restante: {{ timeLeft }}s</p>
      <p>Puntos totales: {{ scoreCards }}</p>

      <div class="bottom-buttons">
        <button *ngIf="!gameStarted" class="start-btn" (click)="startGame()">💧 Comenzar juego</button>
        <button *ngIf="gameStarted" class="reset-btn" (click)="resetMemory()">🔄 Reiniciar</button>
      </div>
    </div>
  </div>
</div>